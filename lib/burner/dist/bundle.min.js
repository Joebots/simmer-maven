!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.children=[]}return i(t,[{key:"draw",value:function(){}},{key:"update",value:function(){}},{key:"setDirty",value:function(t){this.isDirty=t}}]),t}()},function(t,e,n){"use strict";var i=new(n(2))({breadboard:{banks:[{offsetX:0,offsetY:0,width:4,height:480,topMargin:30,leftMargin:30,rows:3,vertical:!0,type:"BUS"},{offsetX:80,offsetY:0,width:75,height:4,topMargin:30,leftMargin:30,rows:32,type:"TERMINAL"},{offsetX:170,offsetY:0,width:75,height:4,topMargin:30,leftMargin:30,rows:32,type:"TERMINAL"},{offsetX:275,offsetY:0,width:75,height:4,topMargin:30,leftMargin:30,rows:32,type:"GPIO"}]},connections:{marginLeft:12,topMargin:25,pitch:15}});window.BurnerNew=i},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(3),o=n(5),a=n(6),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.init()}return i(t,[{key:"init",value:function(){this.activeStepIndex=-1,this.steps=[],this.layers=[],this.connections={},this.initBreadboard(),this.initConnections(),this.initDrawer()}},{key:"initBreadboard",value:function(){this.breadboard=new r(this.config.breadboard),this.layers.push(this.breadboard)}},{key:"initConnections",value:function(){this.connections=new o({color:"#b2a474",width:10}),this.layers.push(this.connections)}},{key:"initDrawer",value:function(){this.drawer=new a}},{key:"updateCanvas",value:function(t,e){var n=window.document.querySelector(t);n&&(n.width=e.width,n.height=e.height,this.load(t),this.drawer.restore())}},{key:"load",value:function(t){this.drawer.load(t,this.layers),this.drawer.start()}},{key:"loadConfig",value:function(t){this.config=t,this.breadboard.load(this.config.breadboard),this.activeStepIndex>-1&&this.show(this.activeStepIndex),this.updateCanvas("#burner",{width:this.config.breadboard.width,height:this.config.breadboard.height})}},{key:"layout",value:function(t){var e=this;this.reset(),this.steps=t.map((function(t){var n=t.pins.reduce((function(t,n){return t[n.bank]=t[n.bank]||{rows:[],connections:[]},t[n.bank].rows.push(n.row),t[n.bank].connections.push({title:n.text,x:n.isRail?e.railPosition(n.bank,n.row):e.config.connections.leftMargin,y:n.isRail?e.config.breadboard.height-e.config.connections.pitch:e.config.connections.topMargin+n.row*e.config.connections.pitch}),t}),{});return{banks:Object.keys(n).map((function(t){return{index:t,rows:n[t].rows,connections:n[t].connections}}))}}))}},{key:"railPosition",value:function(t,e){var n=this.config.breadboard.banks[t];return n.offsetX+n.leftMargin+e*n.pitch}},{key:"reset",value:function(){this.activeStepIndex=-1,this.breadboard.highlight([]),this.connections.highlight([])}},{key:"next",value:function(){this.drawer.reset();var t=++this.activeStepIndex>=this.steps.length?this.activeStepIndex=0:this.activeStepIndex;this.show(t)}},{key:"prev",value:function(){this.drawer.reset();var t=--this.activeStepIndex<0?this.activeStepIndex=this.steps.length-1:this.activeStepIndex;this.show(t)}},{key:"show",value:function(t){var e=this;this.breadboard.highlight(this.steps[t].banks),this.connections.load(this.steps[t].banks.reduce((function(t,e){return Array.prototype.push.apply(t,e.connections),t}),[])).then((function(){return e.connections.highlight()}))}},{key:"parseCircuit",value:function(t){}},{key:"highlightAll",value:function(t){this.breadboard.highlightAll(t)}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0};var o=n(0),a=n(4);t.exports=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.load(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"load",value:function(t){this.initBanks(t.banks)}},{key:"initBanks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.banks=t,this.children=this.banks.map((function(t){return new a(t)}))}},{key:"draw",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"update",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"highlight",value:function(t){var e=this;this.hideBanks(),t.forEach((function(t){return e.children[t.index].highlight(t.rows)}))}},{key:"hideBanks",value:function(){this.children.forEach((function(t){return t.highlight()}))}},{key:"highlightAll",value:function(t){this.children.forEach((function(e){return e.highlightAll(t)}))}}]),e}(o)},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(0);t.exports=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.config=t,n.activeRows={},n.rows=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"draw",value:function(t){this.rows.forEach((function(e,n){var i="white";switch(e.type){case"GPIO":i="yellow";break;case"BUS":2===n&&(i="red")}t.rect(e.x,e.y,e.width,e.height,{background:e.active?i:"black"}),t.text(e.number,e.x-5,e.y,{color:e.active?i:"black",font:"10px Serif",align:"center"})}))}},{key:"update",value:function(){var t=this.config.thickness||3,e=this.config.pitch||15,n=0,i=0,r=0,o=0;this.config.vertical?(n=t,i=e*(this.config.rowCount-this.config.rowOffset),r=this.config.rows,o=0):(n=5*e,i=t,r=this.config.rowCount,o=this.config.rowOffset);var a=this.config.leftMargin+this.config.offsetX,c=this.config.topMargin+this.config.offsetY;this.rows=[];for(var u=o;u<r;u++){var s=(u-o)*e,f=this.config.vertical?a+s:a,h=this.config.vertical?c:c+s,l=n,d=i;f-=t/2,h-=t/2,this.rows.push({number:u+1,x:Math.floor(f),y:Math.floor(h),width:l,height:d,type:this.config.type,active:this.activeRows[u]})}}},{key:"highlight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.activeRows=t.reduce((function(t,e){return t[e]=!0,t}),{}),this.setDirty(!0)}},{key:"highlightAll",value:function(t){for(var e=0;e<this.config.rowCount;e++)this.activeRows[e]=t;this.setDirty(!0)}},{key:"getRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.rows.filter((function(e,n){return t.contains(n)}))}}]),e}(r)},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=n(0);t.exports=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.config=t,n.connections=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"load",value:function(t){var e=this;return this.reset(),new Promise((function(n){setTimeout((function(){e.connections=t.map((function(t){return{background:{type:"circle",x:t.x,y:t.y,width:e.config.width,color:e.config.color},title:t.title}})),n()}))}))}},{key:"reset",value:function(){this.highlight([])}},{key:"highlight",value:function(t){this.highlighted=t||Array.apply(null,{length:this.connections.length}).map(Number.call,Number),this.setDirty(!0)}},{key:"update",value:function(){for(var t=this,e=this.connections.sort((function(t,e){return e.background.y-t.background.y})),n=1;n<e.length;n++){var i=e[n-1],r=e[n],o=r.background.y+2*r.background.width-i.background.y;o>=0&&(r.background.y===i.background.y?r.background.x+=2*r.background.width:r.background.y-=o+1)}this.connections.forEach((function(e,n){return e.active=-1!==t.highlighted.indexOf(n)}))}},{key:"draw",value:function(t){this.connections.forEach((function(e){switch(e.background.type){case"circle":e.active?t.arc(e.background.x,e.background.y,e.background.width,{background:e.background.color}).text(e.title,e.background.x,e.background.y,{color:"black",font:"12px Arial",align:"center"}):t.arc(e.background.x,e.background.y,e.background.width,{background:"black"})}}))}}]),e}(a)},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.running=!1}return i(t,[{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.tree=e,this.stop(),this.context=origami(t),this.drawBackground()}},{key:"start",value:function(){this.running=!0,this.run()}},{key:"stop",value:function(){this.running=!1}},{key:"run",value:function(){var t=this;this.running&&(this.render(this.tree),window.requestAnimationFrame((function(){return t.run()})))}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){e.isDirty&&(e.update(),e.draw(t.context),e.setDirty(!1),t.context.draw()),t.render(e.children)}))}},{key:"drawBackground",value:function(){this.context.background("black").draw()}},{key:"drawBorder",value:function(){this.context.border({border:"1px solid #F00"}).draw()}},{key:"reset",value:function(){this.context.clear()}},{key:"restore",value:function(){this.restoreTree(this.tree)}},{key:"restoreTree",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){e.setDirty(!0),t.restoreTree(e.children)}))}}]),t}();t.exports=r}]);
//# sourceMappingURL=bundle.min.js.map